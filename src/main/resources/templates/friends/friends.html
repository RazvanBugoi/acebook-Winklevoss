<!DOCTYPE html>
    <html xmlns:th="http://www.thymeleaf.org"
          xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5" >
    <head lang="en">
        <meta charset="UTF-8"/>
        <title>Friends - Winklevoss</title>
        <link rel="stylesheet" href="/main.css" />
        <script type="text/javascript" src="/script.js"></script>
    </head>
    <body>
      <div class="logout">
        <!-- // Show user ID and username for debugging (has to go above logout button or it will cover it) -->
        <p style="margin-right: 68px;" th:text="'user ID = ' + ${id}"></p>
        <!-- <p th:text="'current user = ' + ${currentuser}"></p> -->
      </div>

      <div class="logout">
        <form action="/logout" method="get">
          <p><input type="submit" id="Logout" value="Logout" /></p>
        </form>
      </div>

      <nav> <!-- nav bar - subject to change -->
        <a href="/posts"><p>Posts</p></a>
        <a href="/profile"><p>Profile</p></a>
        <a href="/groups"><p>Groups</p></a>
        <a href="/events"><p>Events</p></a>
        <!-- Messages is not on navbar in mock-up, but subject to change (just here for convenience) -->
        <a href="/messages"><p>Messages</p></a>
      </nav>

      <div class="container">
        <div class="title">
          <h1>Friends</h1>
        </div>

        <!-- <p>This will be the Friends page.</p> -->
        <!-- <p th:text="${friends}"></p> -->

        <!-- Tab links -->
        <div class="tab">
          <button class="tablinks" onclick="openTab(event, 'Friends')" id="defaultOpen">Your Friends</button>
          <button class="tablinks" onclick="openTab(event, 'Requests-Received')">Requests Received</button>
          <button class="tablinks" onclick="openTab(event, 'Requests-Sent')">Requests Pending</button>
          <button class="tablinks" onclick="openTab(event, 'Potential-Connections')">People You Might Know</button>
          <button class="tablinks" onclick="openTab(event, 'Browse-Users')">Browse New Users</button>
          <button class="tablinks" onclick="openTab(event, 'Blocked-Users')">Blocked Users</button>
        </div>

        <!-- Tab content -->
        <div id="Friends" class="tabcontent">
          <h3>Friends</h3>
          <span th:if="${friendcount == 0}">
            <p>You don't have any friends yet.</p>
          </span>
          <span th:if="${friendcount &gt; 0}">
            <p>You have <span th:text="${friendcount}"></span> friend<span th:if="${friendcount &gt; 1}">s</span>.</p>
            <div class="icons-container">
              <ul th:each="friend: ${friends}">
                <div class="icon">
                  <li th:text="${friend.username}" />
                  <img src="https://thumbs.dreamstime.com/b/default-avatar-profile-icon-social-media-user-vector-image-icon-default-avatar-profile-icon-social-media-user-vector-image-209162840.jpg" alt="placeholder" width="100" height="100"><br>
                  <button class="with-margin" onclick="myFunction('unfriend')">Unfriend</button><br>
                  <button class="with-margin" onclick="myFunction('block')">Block</button>
                  <form></form>
                </div>
              </ul>
            </div>
          </span>
        </div>

        <div id="Requests-Received" class="tabcontent">
          <h3>Incoming Friend Requests</h3>
          <span th:if="${incount == 0}">
            <p>You currently have no incoming requests.</p>
          </span>
          <span th:if="${incount &gt; 0}">
            <p>You have <span th:text="${incount}"></span> incoming friend request<span th:if="${incount &gt; 1}">s</span>.</p>
            <div class="icons-container">
              <ul th:each="friend: ${inreqs}">
                <div class="icon">
                  <li th:text="${friend.username}" />
                  <img src="https://thumbs.dreamstime.com/b/default-avatar-profile-icon-social-media-user-vector-image-icon-default-avatar-profile-icon-social-media-user-vector-image-209162840.jpg" alt="placeholder" width="100" height="100"><br>
                  <button class="with-margin" onclick="myFunction()">Accept</button>
                  <button class="with-margin" onclick="myFunction()">Reject</button>
                  <form></form>
                </div>
              </ul>
            </div><br>
          </span>
        </div>

        <div id="Requests-Sent" class="tabcontent">
          <h3>Outgoing Friend Requests</h3>
          <span th:if="${outcount == 0}">
            <p>You currently have no outgoing requests.</p>
          </span>
          <span th:if="${outcount &gt; 0}">
            <p>You have <span th:text="${outcount}"></span> pending friend request<span th:if="${outcount &gt; 1}">s</span>.</p>
            <div class="icons-container">
              <ul th:each="friend: ${outreqs}">
                <div class="icon">
                  <li th:text="${friend.username}" />
                  <img src="https://thumbs.dreamstime.com/b/default-avatar-profile-icon-social-media-user-vector-image-icon-default-avatar-profile-icon-social-media-user-vector-image-209162840.jpg" alt="placeholder" width="100" height="100"><br>
                  <button class="with-margin" onclick="myFunction()">Cancel</button>
                  <!-- <button onclick="myFunction()">Send Friend Request</button> -->
                  <form></form>
                </div>
              </ul>
            </div><br>
          </span>
        </div>

        <div id="Potential-Connections" class="tabcontent">
          <h3>People You Might Know</h3>
          <span th:if="${friendsfriendscount == 0}">
            <p>No recommendations.</p>
          </span>
          <span th:if="${friendsfriendscount &gt; 0}">
            <!-- <p>You have <span th:text="${strangercount}"></span> pending friend request<span th:if="${strangercount &gt; 1}">s</span>.</p> -->
            <div class="icons-container">
              <ul th:each="friend: ${friendsfriends}">
                <div class="icon">
                  <li th:text="${friend.username}" />
                  <img src="https://thumbs.dreamstime.com/b/default-avatar-profile-icon-social-media-user-vector-image-icon-default-avatar-profile-icon-social-media-user-vector-image-209162840.jpg" alt="placeholder" width="100" height="100"><br>
                  <button class="with-margin" onclick="myFunction()">Send Friend Request</button><br>
                  <button class="with-margin" onclick="myFunction()">Block</button>
                  <!-- <button onclick="myFunction()">Send Friend Request</button> -->
                  <form></form>
                </div>
              </ul>
            </div><br>
          </span>
        </div>

        <div id="Browse-Users" class="tabcontent">
          <h3>Browse New Users</h3>
          <span th:if="${strangercount == 0}">
            <p>Oh, wow. There are no more new users to meet! Imagine that!</p>
          </span>
          <span th:if="${strangercount &gt; 0}">
            <!-- <p>You have <span th:text="${strangercount}"></span> pending friend request<span th:if="${strangercount &gt; 1}">s</span>.</p> -->
            <div class="icons-container">
              <ul th:each="friend: ${strangers}">
                <div class="icon">
                  <li th:text="${friend.username}" />
                  <img src="https://thumbs.dreamstime.com/b/default-avatar-profile-icon-social-media-user-vector-image-icon-default-avatar-profile-icon-social-media-user-vector-image-209162840.jpg" alt="placeholder" width="100" height="100"><br>
                  <button class="with-margin" onclick="myFunction()">Send Friend Request</button><br>
                  <button class="with-margin" onclick="myFunction()">Block</button>
                  <!-- <button onclick="myFunction()">Send Friend Request</button> -->
                  <form></form>
                </div>
              </ul>
            </div><br>
          </span>
        </div>

        <div id="Blocked-Users" class="tabcontent">
          <h3>Blocked Users</h3>
          <p>These are users you've blocked.</p>
        </div>

        <!-- <div id="Potential-Connections" class="tabcontent">
          <h3>People You Might Know</h3>
          <p>These are friends of friends.</p>
        </div> -->

        <!-- <div class="friend-requests">
          <h3>Requests:</h3>
          <ul th:each="friend: ${reqs}">
            <li th:text="${friend.username}" />
          </ul>
        </div><br> -->

        <!-- <div class="friend-requests">
          <h3>Requests:</h3>
          <ul th:each="req: ${reqs}">
            <span th:if="${}"><li th:text="${req.username}" /></span>
          </ul>
        </div><br> -->

        <!-- <form action="#" th:action="@{/friends/request}" method="post">
          <label for="submit">Request Benjamin as friend</label>
          <input type="hidden" name="requesterId" th:value="${id}">
          <input type="hidden" name="requesteeId" th:value="13">
          <p><input type="submit" value="Submit" /></p>
        </form> -->

        <!-- <form action="#" th:action="@{/friends/request}" th:object="${friend}" method="post">
          <label for="submit">Request Benjamin as friend</label>
          <input type="hidden" name="requester_id" th:value="id">
          <input type="hidden" name="requestee_id" value="1L">
          <p><input type="submit" value="Submit" /></p>
        </form> -->

        <br><a href="/posts">Back to Posts</a>

      </div>

      <script>
        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();
        
        // (PUT THIS IN SEPARATE JAVA FILE) Script for buttons, takes button name as argument (returns string for TL conditional to process different post requests)
        function myFunction() {
          var txt;
          if (confirm("Are you sure?")) {
            txt = "You pressed OK!";
          } else {
            txt = "You pressed Cancel!";
          }
          document.getElementById("demo").innerHTML = txt;
        }
      </script>
    </body>
</html>
